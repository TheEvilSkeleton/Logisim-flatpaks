app-id: com.cassidyjames.Plausible
base: io.elementary.BaseApp
base-version: 'juno-20.08'
runtime: org.gnome.Platform
runtime-version: '3.38'
sdk: org.gnome.Sdk
command: com.github.cassidyjames.plausible
rename-icon: icon
rename-desktop-file: launcher.desktop
finish-args:
- --socket=wayland
- --socket=fallback-x11
- --share=network
- --socket=session-bus
- --device=dri
modules:

- name: plausible
  buildsystem: meson
  sources:
  - type: git
    url: https://github.com/cassidyjames/plausible.git

- name: desktop
  buildsystem: simple
  build-commands:
  - install -Dm644 -t /app/share/icons/hicolor/128x128/apps data/icon.png
  - install -Dm644 -t /app/share/applications data/launcher.desktop
  - sed -i 's/Icon=com.github.cassidyjames.plausible/Icon=com.github.cassidyjames.Plausible/' /app/share/applications/launcher.desktop
  - install -Dm644 -t /app/share/metainfo com.cassidyjames.Plausible.metainfo.xml
  sources:
  - type: git
    url: https://github.com/cassidyjames/plausible.git
  - type: file
    path: com.cassidyjames.Plausible.metainfo.xml
